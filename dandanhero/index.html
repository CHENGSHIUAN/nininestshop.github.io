<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’–å©—â­å½ˆå½ˆè‹±é›„â­çµ„åˆæŸ¥è©¢</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        :root {
            --primary-pink: #ff85b2;
            --soft-pink: #fff0f6;
            --bg-gray: #fdfbfb;
            --text-dark: #4a4a4a;
        }

        body { 
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; 
            background-color: var(--bg-gray); 
            margin: 0; padding: 20px; color: var(--text-dark); 
        }

        .game-header { 
            text-align: center; background: linear-gradient(135deg, #333, #555); 
            color: white; padding: 30px; border-radius: 15px; margin-bottom: 25px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .game-header h1 { margin: 0; font-size: 28px; color: #ffffff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }

        /* æœå°‹å€å¡Š */
        .filter-section { 
            background: white; padding: 25px; border-radius: 15px; margin-bottom: 30px; 
            box-shadow: 0 10px 25px rgba(255, 133, 178, 0.1); border: 1px solid #ffeef4;
        }

        .search-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 12px; margin-bottom: 25px; 
        }
        
        .search-item { 
            border: 2px solid #f0f0f0; padding: 10px; border-radius: 12px; text-align: center; 
            background: #fff; transition: transform 0.2s, border-color 0.2s;
        }
        .search-item:hover { transform: translateY(-3px); border-color: var(--primary-pink); }
        .search-item img { width: 65px; height: 65px; object-fit: cover; border-radius: 10px; margin-bottom: 8px; background: #fafafa; }
        .search-item .name { font-size: 13px; font-weight: 600; color: #666; display: block; height: 1.2em; overflow: hidden; }

        /* åŠ æ¸›è¨ˆæ•¸å™¨ */
        .counter { display: flex; justify-content: center; align-items: center; gap: 5px; margin-top: 5px; }
        .counter button { width: 22px; height: 22px; cursor: pointer; border: 1px solid #ffc1e3; background: #fff0f6; border-radius: 4px; color: #d63384; font-weight: bold; }
        .counter input { width: 25px; text-align: center; border: 1px solid #ddd; border-radius: 4px; font-size: 12px; }

        .search-btn { 
            background: linear-gradient(to right, #ff85b2, #f76ca1); 
            color: white; border: none; padding: 15px 60px; border-radius: 50px; 
            cursor: pointer; font-size: 18px; font-weight: bold; display: block; margin: 0 auto;
            box-shadow: 0 6px 20px rgba(255, 133, 178, 0.4); transition: 0.3s;
        }
        .search-btn:hover { transform: scale(1.05); }

        /* çµæœåˆ—è¡¨ (å¡ç‰‡æµ) */
        .package-list { display: flex; flex-direction: column; gap: 15px; }
        
        .package-card {
            background: white; border-radius: 15px; display: flex; align-items: center;
            padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-left: 6px solid var(--primary-pink); transition: 0.3s;
        }
        .package-card:hover { transform: scale(1.005); box-shadow: 0 6px 20px rgba(0,0,0,0.1); }

        .id-area { width: 180px; padding-right: 20px; border-right: 1px dashed #ddd; }
        <div class="id-area">
    <div class="id-text">{{ item.id }}</div>
    
    <div v-if="item.price" class="price-tag">
        ğŸ’° {{ item.price }}
    </div>
</div>
        .id-text { font-size: 15px; font-weight: bold; color: #e83e8c; word-break: break-all; }
        .price-tag {
            display: inline-block;
            margin-top: 8px;
            padding: 2px 10px;
            background-color: #fff0f6;
            color: #ff4757;
            border-radius: 50px;
            font-size: 14px;
            font-weight: bold;
            border: 1px solid #ff85b2;
        }
        .content-area { flex: 1; padding-left: 20px; display: flex; flex-wrap: wrap; gap: 12px; }

        .card-box { width: 80px; text-align: center; position: relative; }
        .card-box img { width: 100%; height: 80px; object-fit: cover; border: 2px solid #eee; border-radius: 10px; background: #fafafa; }
        .card-count-tag { 
            position: absolute; top: -8px; right: -8px; background: #ff4757; color: white; 
            border-radius: 50%; width: 22px; height: 22px; font-size: 12px; line-height: 22px; 
            font-weight: bold; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .card-label { font-size: 11px; color: #888; margin-top: 5px; font-weight: 500; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

        /* è¼‰å…¥ä¸­å‹•ç•« */
        .loading { text-align: center; padding: 50px; color: var(--primary-pink); font-weight: bold; }
    </style>
</head>
<body>

<div id="app">
    <header class="game-header">
        <h1>ğŸ’–å©—â­å½ˆå½ˆè‹±é›„â­</h1>
    </header>

    <div class="filter-section">
        <div class="search-grid">
            <div v-for="name in allAvailableCards" :key="name" class="search-item">
                <img :src="'images/' + name + '.jpg'" onerror="this.src='https://via.placeholder.com/65?text=?'">
                <span class="name">{{ name }}</span>
                <div class="counter">
                    <button @click="changeCount(name, -1)">-</button>
                    <input type="text" :value="searchCounts[name] || 0" readonly>
                    <button @click="changeCount(name, 1)">+</button>
                </div>
            </div>
        </div>
        <button class="search-btn" @click="doSearch">æŸ¥è©¢ç¬¦åˆçµ„åˆ (à¹‘ãƒ»Ï‰-)ï½â™¥â€</button>
    </div>

    <div v-if="loading" class="loading">æ­£åœ¨è¼‰å…¥è©¦ç®—è¡¨è³‡æ–™...</div>
    
    <div v-else class="package-list">
        <div class="package-card" v-for="item in searchResults" :key="item.id">
            <div class="id-area">
                <div class="id-text">{{ item.id }}</div>
            </div>
            <div class="content-area">
                <div class="card-box" v-for="(count, cardName) in item.cards" :key="cardName">
                    <img :src="'images/' + cardName + '.jpg'" onerror="this.src='https://via.placeholder.com/80?text=?'">
                    <span v-if="count > 1" class="card-count-tag">{{ count }}</span>
                    <span class="card-label">{{ cardName }}</span>
                </div>
            </div>
        </div>
        
        <div v-if="searchResults.length === 0" style="text-align: center; padding: 50px; color: #999; background: white; border-radius: 15px;">
            æ²’æœ‰æ‰¾åˆ°å®Œå…¨ç¬¦åˆæ•¸é‡çš„çµ„åˆQQ
        </div>
    </div>
</div>

<script>
    const { createApp } = Vue;

    // --- ã€è«‹å‹™å¿…ä¿®æ”¹é€™è£¡ã€‘ ---
    // è²¼ä¸Šä½ åœ¨ Google è©¦ç®—è¡¨ç™¼å¸ƒå¾Œå–å¾—çš„ CSV ç¶²å€
    const SPREADSHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRe_DkETdOHyEKFRMG-FG5nqpI_jqbhyL7-uVlP7JTgS4FuDM8nplYhTBATLshRrsNY1QWPru8p-lun/pub?output=csv'; 

    createApp({
        data() {
            return {
                // é€™è£¡å¡«å¯«æœå°‹å€è¦å‡ºç¾çš„å¡ç‰‡åœ–ç‰‡åç¨±
                allAvailableCards: ['é¾ç‚®', 'æ­¦è£æµ·èº', 'æ„›ç¥ä¹‹å¼“', 'ç¹†æ–¯', 'é£›ç¿¼å¤©ç‹¼', 'ç¿ è¶å¥³ç‹', 'ç™½é¾', 'ç³–è±†äºº', 'æ™¶çŸ³å¼“', 'æ™¶çŸ³ç‚®', 'è¬èƒ½å†°ç®±', 'ç¨è§’ç¸å¼“', 'æ™¶çŸ³æ­¥æ§', 'æ™¶çŸ³ç«ç®­ç­’', 'æ€’ç‰™', 'çµé·¹', 'æ™¶çŸ³æ‰‹é›·', 'æ™¶çŸ³æ‰‹ç‚®', 'èŸ²å·¢æ‰‹ç‚®', 'æ´¾å°ä¹‹æ˜Ÿ', 'é«˜å£“æ°´æ§'],
                searchCounts: {}, 
                allPackages: [],
                searchResults: [],
                loading: true
            }
        },
        methods: {
            changeCount(name, delta) {
                if (!this.searchCounts[name]) this.searchCounts[name] = 0;
                let newValue = this.searchCounts[name] + delta;
                this.searchCounts[name] = newValue < 0 ? 0 : newValue;
            },
            doSearch() {
                // ç¯©é¸é‚è¼¯ï¼šçµ„åˆå…§çš„å¡ç‰‡æ•¸é‡å¿…é ˆå¤§æ–¼ç­‰æ–¼æœå°‹è¨­å®šçš„æ•¸é‡
                this.searchResults = this.allPackages.filter(pkg => {
                    for (let name in this.searchCounts) {
                        let required = this.searchCounts[name];
                        if (required > 0) {
                            let pkgCount = pkg.cards[name] || 0;
                            if (pkgCount < required) return false;
                        }
                    }
                    return true;
                });
            },
fetchData() {
    Papa.parse(SPREADSHEET_URL, {
        download: true,
        header: true,
        complete: (results) => {
            this.allPackages = results.data
                .filter(row => row.id) 
                .map(row => {
                    let cardData = {};
                    // ç¾åœ¨è®€å– C æ¬„ (content)
                    if (row.content) { 
                        row.content.split('+').forEach(part => {
                            let [name, count] = part.split('x');
                            if (name) cardData[name.trim()] = parseInt(count) || 1;
                        });
                    }
                    return { 
                        id: row.id, 
                        price: row.price, // æ–°å¢ï¼šè®€å– B æ¬„ (price)
                        cards: cardData 
                    };
                });
            this.searchResults = this.allPackages;
            this.loading = false;
        }
    });
}
        mounted() {
            this.allAvailableCards.forEach(n => this.searchCounts[n] = 0);
            if (SPREADSHEET_URL === 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRe_DkETdOHyEKFRMG-FG5nqpI_jqbhyL7-uVlP7JTgS4FuDM8nplYhTBATLshRrsNY1QWPru8p-lun/pubhtml') {
                alert('è«‹å…ˆåœ¨ index.html ä¸­å¡«å…¥ä½ çš„ Google è©¦ç®—è¡¨ CSV ç¶²å€ï¼');
                this.loading = false;
            } else {
                this.fetchData();
            }
        }
    }).mount('#app');
</script>

</body>

</html>
